{
  "project_name": "CodeEngage",
  "description": "A production-ready, developer-focused web application for saving, sharing, and discovering code snippets with advanced collaboration, code analysis, and productivity features. Built with PHP, MySQL, HTML, and Tailwind CSS. Optimized for free-tier hosting with separate frontend and backend architecture for easy deployment.",
  "system_overview": {
    "architecture_type": "Decoupled Monolith with Separate Frontend/Backend",
    "communication": "RESTful JSON API between frontend and backend",
    "deployment_options": [
      "Single-server (traditional)",
      "Separate servers (frontend on Cloudflare Pages/CDN, backend on InfinityFree)",
      "Hybrid (frontend on Netlify/Vercel, backend on shared hosting)"
    ],
    "key_innovations": [
      "Real-time collaboration without WebSockets",
      "Intelligent code analysis",
      "Developer productivity suite",
      "Gamification and learning features",
      "All features work on free-tier hosting"
    ]
  },
  "directory_structure": {
    "frontend_root": "/codeengage-frontend",
    "backend_root": "/codeengage-backend",
    "complete_structure": {
      "frontend": {
        "public": [
          "index.html (SPA entry point)",
          "favicon.ico",
          "manifest.json (PWA)",
          "robots.txt",
          ".htaccess (for Apache rewrites)"
        ],
        "src": {
          "css": [
            "main.css (compiled Tailwind)",
            "syntax-highlighting.css",
            "animations.css"
          ],
          "js": {
            "modules": {
              "api": [
                "api-client.js (Axios-like wrapper)",
                "auth-manager.js (JWT/session handling)",
                "websocket-polyfill.js (HTTP long polling)"
              ],
              "components": [
                "collaborative-editor.js (CodeMirror wrapper)",
                "command-palette.js",
                "code-visualizer.js",
                "demo-sandbox.js",
                "notification-system.js"
              ],
              "services": [
                "offline-manager.js (Service Worker + IndexedDB)",
                "shortcut-manager.js (Keyboard shortcuts)",
                "analytics-worker.js (Web Worker for code analysis)",
                "cache-manager.js (Predictive caching)"
              ],
              "utils": [
                "form-validator.js",
                "code-formatter.js",
                "diff-viewer.js",
                "export-generator.js"
              ]
            },
            "pages": {
              "dashboard.js",
              "snippet-editor.js",
              "snippet-viewer.js",
              "profile.js",
              "admin.js",
              "login.js",
              "signup.js"
            },
            "app.js (Main application bootstrap)",
            "router.js (Client-side routing)"
          },
          "templates": {
            "components": [
              "header.html",
              "sidebar.html",
              "footer.html",
              "modal-base.html",
              "toast-notification.html"
            ],
            "pages": {
              "dashboard.html",
              "snippet-editor.html",
              "snippet-viewer.html",
              "profile.html",
              "admin.html",
              "login.html",
              "signup.html",
              "health.html"
            }
          }
        },
        "assets": {
          "fonts": [
            "Inter-Variable.woff2",
            "JetBrainsMono-Variable.woff2",
            "PlusJakartaSans-Bold.woff2"
          ],
          "icons": {
            "phosphor-icons": [
              "regular/",
              "fill/",
              "duotone/"
            ],
            "custom": [
              "badges/",
              "achievements/",
              "tech-logos/"
            ]
          },
          "svg": [
            "logo.svg",
            "logo-animated.svg",
            "background-aurora.svg",
            "grid-pattern.svg",
            "noise-texture.png"
          ]
        },
        "config": {
          "tailwind.config.js",
          "postcss.config.js",
          "service-worker.js",
          ".env.frontend"
        },
        "build": [
          "package.json (with build scripts)",
          "vite.config.js (or webpack)",
          "build/ (compiled output)"
        ]
      },
      "backend": {
        "public": [
          "index.php (API entry point)",
          ".htaccess (API routing)"
        ],
        "app": {
          "Controllers": {
            "Api": [
              "AuthController.php (login, logout, register, token refresh)",
              "SnippetController.php (CRUD operations, versions, tags)",
              "CollaborationController.php (real-time updates, cursor sync)",
              "AnalysisController.php (code analysis requests)",
              "UserController.php (profile, preferences, achievements)",
              "AdminController.php (users, audit logs, moderation)",
              "ExportController.php (various format exports)",
              "HealthController.php (system status)"
            ]
          },
          "Services": {
            "AuthService.php (complete authentication logic)",
            "SnippetService.php (complete snippet management)",
            "CollaborationService.php (real-time collaboration logic)",
            "AnalysisService.php (code analysis algorithms)",
            "GamificationService.php (achievements, points, leaderboards)",
            "SearchService.php (intelligent search implementation)",
            "ExportService.php (format conversion logic)",
            "CacheService.php (intelligent caching strategy)"
          },
          "Repositories": {
            "UserRepository.php (complete user data access)",
            "SnippetRepository.php (complete snippet data access)",
            "CollaborationRepository.php (real-time session storage)",
            "AnalysisRepository.php (analysis results storage)",
            "AchievementRepository.php (gamification data)",
            "AuditRepository.php (complete audit logging)"
          },
          "Models": {
            "User.php (complete model with methods)",
            "Snippet.php (complete model with versioning)",
            "SnippetVersion.php",
            "Tag.php",
            "Organization.php",
            "Role.php",
            "Permission.php",
            "Achievement.php",
            "AuditLog.php",
            "CollaborationSession.php"
          },
          "Middleware": {
            "AuthMiddleware.php (JWT/session validation)",
            "CorsMiddleware.php (CORS headers management)",
            "RateLimitMiddleware.php (IP-based rate limiting)",
            "CsrfMiddleware.php (API CSRF protection)",
            "RoleMiddleware.php (RBAC enforcement)",
            "CollaborationMiddleware.php (real-time session handling)",
            "CacheMiddleware.php (response caching)"
          },
          "Exceptions": {
            "ApiException.php",
            "ValidationException.php",
            "NotFoundException.php",
            "UnauthorizedException.php"
          },
          "Helpers": {
            "ApiResponse.php (standardized JSON responses)",
            "ValidationHelper.php (input validation)",
            "CodeHelper.php (code processing utilities)",
            "SecurityHelper.php (security utilities)",
            "FormatHelper.php (export formatting)"
          }
        },
        "config": {
          "database.php (DB configuration)",
          "app.php (application settings)",
          "cache.php (cache configuration)",
          "auth.php (authentication settings)",
          "api.php (API rate limits, CORS)",
          ".env (environment variables)"
        },
        "migrations": [
          "001_create_users_table.php",
          "002_create_snippets_tables.php",
          "003_create_collaboration_tables.php",
          "004_create_analysis_tables.php",
          "005_create_gamification_tables.php",
          "006_create_audit_tables.php"
        ],
        "storage": {
          "cache": [
            "query/",
            "api/",
            "analysis/"
          ],
          "logs": [
            "api.log",
            "error.log",
            "audit.log"
          ],
          "temp": [
            "exports/",
            "uploads/",
            "collaboration/"
          ]
        },
        "scripts": {
          "database": [
            "backup.php",
            "migrate.php",
            "seed.php"
          ],
          "maintenance": [
            "cleanup-sessions.php",
            "update-cache.php",
            "calculate-leaderboards.php"
          ]
        },
        "tests": {
          "unit": [
            "Services/",
            "Models/"
          ],
          "integration": [
            "Controllers/",
            "Api/"
          ]
        }
      },
      "shared": {
        "database_schema": "codeengage_schema.sql",
        "documentation": [
          "API_DOCUMENTATION.md",
          "DEPLOYMENT_GUIDE.md",
          "DEVELOPER_GUIDE.md"
        ],
        "deployment": {
          "docker": [
            "docker-compose.yml",
            "Dockerfile.frontend",
            "Dockerfile.backend"
          ],
          "infinityfree": [
            "deploy-infinityfree.sh",
            "htaccess-backend",
            "htaccess-frontend"
          ]
        }
      }
    }
  },
  "database_schema": {
    "engine": "MySQL 8.0+",
    "character_set": "utf8mb4",
    "collation": "utf8mb4_unicode_ci",
    "tables": {
      "users": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "username VARCHAR(50) UNIQUE NOT NULL",
          "email VARCHAR(255) UNIQUE NOT NULL",
          "password_hash VARCHAR(255) NOT NULL",
          "display_name VARCHAR(100)",
          "avatar_url VARCHAR(500)",
          "bio TEXT",
          "preferences JSON DEFAULT (JSON_OBJECT('theme', 'dark', 'editor_mode', 'default'))",
          "achievement_points INT DEFAULT 0",
          "last_active_at TIMESTAMP NULL",
          "email_verified_at TIMESTAMP NULL",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP",
          "deleted_at TIMESTAMP NULL"
        ],
        "indexes": [
          "INDEX idx_users_username (username)",
          "INDEX idx_users_email (email)",
          "INDEX idx_users_achievement_points (achievement_points DESC)"
        ]
      },
      "snippets": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "author_id INT NOT NULL",
          "organization_id INT NULL",
          "title VARCHAR(255) NOT NULL",
          "description TEXT",
          "visibility ENUM('public', 'private', 'organization') DEFAULT 'public'",
          "language VARCHAR(50) NOT NULL",
          "forked_from_id INT NULL",
          "is_template BOOLEAN DEFAULT FALSE",
          "template_variables JSON NULL",
          "view_count INT DEFAULT 0",
          "star_count INT DEFAULT 0",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP",
          "deleted_at TIMESTAMP NULL",
          "FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE",
          "FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE SET NULL",
          "FOREIGN KEY (forked_from_id) REFERENCES snippets(id) ON DELETE SET NULL"
        ],
        "indexes": [
          "INDEX idx_snippets_author (author_id, created_at DESC)",
          "INDEX idx_snippets_language (language, created_at DESC)",
          "INDEX idx_snippets_visibility (visibility, created_at DESC)",
          "INDEX idx_snippets_organization (organization_id, visibility)",
          "FULLTEXT idx_snippets_search (title, description)"
        ]
      },
      "snippet_versions": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "snippet_id INT NOT NULL",
          "version_number INT NOT NULL",
          "code LONGTEXT NOT NULL",
          "checksum VARCHAR(64) NOT NULL",
          "editor_id INT NOT NULL",
          "change_summary VARCHAR(500)",
          "analysis_results JSON NULL",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "FOREIGN KEY (snippet_id) REFERENCES snippets(id) ON DELETE CASCADE",
          "FOREIGN KEY (editor_id) REFERENCES users(id) ON DELETE CASCADE",
          "UNIQUE KEY (snippet_id, version_number)"
        ],
        "indexes": [
          "INDEX idx_snippet_versions_snippet (snippet_id, version_number DESC)",
          "INDEX idx_snippet_versions_editor (editor_id, created_at DESC)",
          "FULLTEXT idx_snippet_versions_code (code)"
        ]
      },
      "collaboration_sessions": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "snippet_id INT NOT NULL",
          "session_token VARCHAR(64) UNIQUE NOT NULL",
          "participants JSON DEFAULT (JSON_ARRAY())",
          "cursor_positions JSON DEFAULT (JSON_OBJECT())",
          "last_activity TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "FOREIGN KEY (snippet_id) REFERENCES snippets(id) ON DELETE CASCADE"
        ],
        "indexes": [
          "INDEX idx_collab_sessions_token (session_token)",
          "INDEX idx_collab_sessions_snippet (snippet_id)",
          "INDEX idx_collab_sessions_activity (last_activity)"
        ]
      },
      "code_analyses": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "snippet_version_id INT NOT NULL",
          "analysis_type VARCHAR(50) NOT NULL",
          "complexity_score DECIMAL(5,2)",
          "security_issues JSON DEFAULT (JSON_ARRAY())",
          "performance_suggestions JSON DEFAULT (JSON_ARRAY())",
          "code_smells JSON DEFAULT (JSON_ARRAY())",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "FOREIGN KEY (snippet_version_id) REFERENCES snippet_versions(id) ON DELETE CASCADE"
        ],
        "indexes": [
          "INDEX idx_code_analyses_version (snippet_version_id)",
          "INDEX idx_code_analyses_type (analysis_type, created_at DESC)"
        ]
      },
      "achievements": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "user_id INT NOT NULL",
          "badge_type VARCHAR(50) NOT NULL",
          "badge_name VARCHAR(100) NOT NULL",
          "badge_description TEXT",
          "badge_icon VARCHAR(100)",
          "points_awarded INT DEFAULT 0",
          "metadata JSON DEFAULT (JSON_OBJECT())",
          "earned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
        ],
        "indexes": [
          "INDEX idx_achievements_user (user_id, earned_at DESC)",
          "INDEX idx_achievements_type (badge_type)"
        ]
      },
      "tags": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "name VARCHAR(50) NOT NULL",
          "slug VARCHAR(50) UNIQUE NOT NULL",
          "description TEXT",
          "usage_count INT DEFAULT 0",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
        ],
        "indexes": [
          "INDEX idx_tags_slug (slug)",
          "INDEX idx_tags_usage (usage_count DESC)"
        ]
      },
      "snippet_tags": {
        "columns": [
          "snippet_id INT NOT NULL",
          "tag_id INT NOT NULL",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "PRIMARY KEY (snippet_id, tag_id)",
          "FOREIGN KEY (snippet_id) REFERENCES snippets(id) ON DELETE CASCADE",
          "FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE"
        ]
      },
      "organizations": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "name VARCHAR(255) NOT NULL",
          "slug VARCHAR(100) UNIQUE NOT NULL",
          "description TEXT",
          "owner_id INT NOT NULL",
          "color_theme VARCHAR(50) DEFAULT 'blue'",
          "settings JSON DEFAULT (JSON_OBJECT())",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP",
          "FOREIGN KEY (owner_id) REFERENCES users(id) ON DELETE CASCADE"
        ]
      },
      "organization_members": {
        "columns": [
          "organization_id INT NOT NULL",
          "user_id INT NOT NULL",
          "role ENUM('owner', 'admin', 'member', 'viewer') DEFAULT 'member'",
          "joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "PRIMARY KEY (organization_id, user_id)",
          "FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE CASCADE",
          "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE"
        ]
      },
      "roles": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "name VARCHAR(50) UNIQUE NOT NULL",
          "description TEXT",
          "is_system_role BOOLEAN DEFAULT FALSE",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
        ]
      },
      "permissions": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "name VARCHAR(100) UNIQUE NOT NULL",
          "description TEXT",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
        ]
      },
      "user_roles": {
        "columns": [
          "user_id INT NOT NULL",
          "role_id INT NOT NULL",
          "assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "PRIMARY KEY (user_id, role_id)",
          "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE",
          "FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE"
        ]
      },
      "role_permissions": {
        "columns": [
          "role_id INT NOT NULL",
          "permission_id INT NOT NULL",
          "PRIMARY KEY (role_id, permission_id)",
          "FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE",
          "FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE"
        ]
      },
      "audit_logs": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "actor_id INT NULL",
          "action_type VARCHAR(100) NOT NULL",
          "entity_type VARCHAR(50) NOT NULL",
          "entity_id INT NULL",
          "old_values JSON NULL",
          "new_values JSON NULL",
          "ip_address VARCHAR(45)",
          "user_agent TEXT",
          "request_id VARCHAR(64)",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "FOREIGN KEY (actor_id) REFERENCES users(id) ON DELETE SET NULL"
        ],
        "indexes": [
          "INDEX idx_audit_logs_actor (actor_id, created_at DESC)",
          "INDEX idx_audit_logs_entity (entity_type, entity_id)",
          "INDEX idx_audit_logs_action (action_type, created_at DESC)"
        ]
      },
      "login_attempts": {
        "columns": [
          "id INT AUTO_INCREMENT PRIMARY KEY",
          "user_id INT NULL",
          "ip_address VARCHAR(45) NOT NULL",
          "attempt_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "success BOOLEAN DEFAULT FALSE",
          "user_agent TEXT",
          "FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL"
        ],
        "indexes": [
          "INDEX idx_login_attempts_ip (ip_address, attempt_time DESC)",
          "INDEX idx_login_attempts_user (user_id, attempt_time DESC)"
        ]
      },
      "snippet_relationships": {
        "columns": [
          "source_snippet_id INT NOT NULL",
          "target_snippet_id INT NOT NULL",
          "relationship_type VARCHAR(50) NOT NULL",
          "strength DECIMAL(3,2) DEFAULT 1.0",
          "created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "PRIMARY KEY (source_snippet_id, target_snippet_id, relationship_type)",
          "FOREIGN KEY (source_snippet_id) REFERENCES snippets(id) ON DELETE CASCADE",
          "FOREIGN KEY (target_snippet_id) REFERENCES snippets(id) ON DELETE CASCADE"
        ]
      }
    }
  },
  "backend_logic_details": {
    "authentication_system": {
      "flow": "Session-based with JWT alternative for API",
      "password_hashing": "PASSWORD_ARGON2ID with cost factor 12",
      "session_management": "Regenerated on privilege change, HttpOnly + Secure cookies",
      "rate_limiting": "Exponential backoff per IP and per account",
      "login_attempts": "Tracked with 5-minute lockout after 5 failures"
    },
    "snippet_management": {
      "versioning": "Each edit creates new version with incremental version_number",
      "soft_delete": "All deletes use deleted_at timestamp",
      "forking": "Creates new snippet with forked_from_id reference",
      "templating": "Templates can have variables replaced on instantiation",
      "audit_trail": "All changes logged to audit_logs with old/new values"
    },
    "collaboration_system": {
      "real_time_implementation": "HTTP Long Polling with EventSource fallback",
      "session_handling": "Unique session_token for each collaboration session",
      "participant_management": "JSON array of user IDs with join/leave timestamps",
      "cursor_sync": "JSON object mapping user_id to {line, ch} positions",
      "conflict_resolution": "Three-way merge algorithm for concurrent edits",
      "cleanup": "Sessions auto-delete after 24 hours inactivity"
    },
    "code_analysis": {
      "complexity_calculation": "Cyclomatic complexity via control flow analysis",
      "security_scanning": "Regex patterns for SQLi, XSS, path traversal",
      "performance_analysis": "Identifies nested loops, expensive operations",
      "code_smells": "Long methods, duplicate code detection via hashing",
      "caching": "Analysis results cached to avoid recomputation"
    },
    "gamification_system": {
      "achievement_triggers": "Event-based triggers for user actions",
      "points_system": "Weighted points based on action importance",
      "leaderboards": "Daily, weekly, monthly, all-time rankings",
      "badge_progression": "Tiered badges (bronze, silver, gold)",
      "notifications": "Real-time badge award notifications"
    },
    "search_system": {
      "fulltext_search": "MySQL FULLTEXT on titles, descriptions, code",
      "semantic_search": "n-gram similarity for code functionality matching",
      "filters": "Language, tags, date ranges, complexity scores",
      "sorting": "Relevance, recency, popularity, complexity"
    },
    "caching_strategy": {
      "layers": [
        "Cloudflare edge cache for public snippets",
        "PHP APCu for authenticated user data",
        "File cache for expensive queries",
        "Browser cache for static assets"
      ],
      "invalidation": "Tag-based invalidation on write operations",
      "predictive_caching": "Prefetch based on user behavior patterns"
    },
    "export_system": {
      "formats": [
        "JSON (full metadata)",
        "Markdown (with syntax highlighting)",
        "VS Code snippets (.code-snippets)",
        "JetBrains live templates",
        "GitHub Gist synchronization",
        "HTML embed widgets"
      ],
      "batch_operations": "Export multiple snippets as zip archive",
      "scheduled_exports": "Via cron jobs for organizations"
    }
  },
  "frontend_pages_and_designs": {
    "dashboard_page": {
      "layout": "Responsive Bento Grid layout",
      "sections": [
        "Welcome Hero with daily coding streak visualization",
        "Key Metrics Cards (Glassmorphism style)",
        "Recent Snippets Carousel",
        "Activity Heatmap (GitHub style)",
        "Community Trends / Leaderboard Ticker"
      ],
      "design": {
        "theme": "Midnight Blue & Neon accents",
        "style": "Glassmorphism with noise textures",
        "typography": "Sans-serif headings, Monospace data values"
      },
      "interactions": [
        "Drag-and-drop widget customization",
        "Hover glow effects",
        "Skeleton loading states",
        "Animated count-up for statistics"
      ]
    },
    "snippet_editor_page": {
      "layout": "Immersive IDE-like layout (Sidebar | Editor | Context Panel)",
      "editor_features": [
        "CodeMirror 6 Custom Theme (Dracula/Nord/Monokai)",
        "Smooth cursor animations & caret blinking",
        "Minimap scrollbar",
        "Collapsible region folding",
        "Live markdown preview split-pane"
      ],
      "properties_panel": {
        "style": "Floating glass panel or collapsible sidebar",
        "elements": [
          "Smart tag suggestion chips",
          "Language icon selector",
          "Visibility toggle switch with animation",
          "Live collaboration avatars stack"
        ]
      },
      "design": "Distraction-free focus mode, translucent UI elements"
    },
    "snippet_viewer_page": {
      "layout": "Modern showcase layout (Hero header + Code Block + Metadata Rail)",
      "code_display": [
        "Rich syntax highlighting with ligatures",
        "Floating action bar (Copy, Download, Raw)",
        "Line highlighting and permalinks",
        "Embedded terminal-like output preview"
      ],
      "side_panel": [
        "Interactive version timeline slider",
        "Comment threads with rich text support",
        "Related snippets graph visualization"
      ],
      "design": "Clean, documentation-style readability, high contrast code blocks"
    },
    "collaboration_page": {
      "layout": "Editor + participant sidebar + chat panel",
      "features": [
        "Real-time cursor sharing",
        "Participant video/audio (WebRTC if available)",
        "Collaborative chat with code references",
        "Edit conflict resolution UI",
        "Session recording playback"
      ],
      "design": "Multi-user color coding, animated cursor trails"
    },
    "profile_page": {
      "layout": "Tabbed interface: Overview, Snippets, Achievements, Settings",
      "sections": [
        "User info with avatar upload",
        "Activity timeline",
        "Achievement showcase",
        "Snippet statistics",
        "API key management",
        "Export data options"
      ],
      "design": "Personalized theme based on achievement level"
    },
    "admin_dashboard": {
      "layout": "Metrics overview + management tables",
      "sections": [
        "System health metrics",
        "User management with bulk actions",
        "Snippet moderation queue",
        "Audit log viewer with filtering",
        "Organization management",
        "Cache management controls"
      ],
      "design": "Data-heavy with charts and tables, export functionality"
    },
    "login_signup_pages": {
      "layout": "Split screen (Product Showcase Art | Interactive Form)",
      "features": [
        "Social login with particle effects",
        "Password strength visualizer (progress bar)",
        "Animated form field labels (Floating labels)",
        "Success confetti animation"
      ],
      "design": "Premium brand showcase, 3D illustrative elements"
    },
    "command_palette": {
      "trigger": "Ctrl+K or Cmd+K",
      "features": [
        "Fuzzy search across snippets, users, commands",
        "Quick actions without navigation",
        "Recent items history",
        "Command categories",
        "Keyboard-only navigation"
      ],
      "design": "Centered modal with backdrop blur, dark theme"
    },
    "mobile_responsive": {
      "breakpoints": [
        "Mobile (< 640px): Bottom navigation bar app-like capability",
        "Tablet (640px-1024px): Adaptive grid layouts",
        "Desktop (> 1024px): Expanded multi-column views"
      ],
      "touch_interactions": [
        "Swipe-to-action list items",
        "Pull-to-refresh",
        "Haptic feedback triggers (if supported)"
      ]
    },
    "design_system_tokens": {
      "colors": {
        "primary": "Violet/Indigo gradients",
        "background": "Deep Space Black (#0B0F19)",
        "surface": "Translucent Grey (#1F293780)",
        "accent": "Cyberpunk Neon (#00F0FF, #7000FF)"
      },
      "shadows": {
        "card": "0 8px 32px 0 rgba(31, 38, 135, 0.37)",
        "glow": "0 0 20px rgba(112, 0, 255, 0.5)"
      },
      "radius": {
        "default": "1rem (rounded-2xl)",
        "button": "0.75rem (rounded-xl)"
      }
    }
  },
  "api_endpoints": {
    "auth_endpoints": {
      "POST /api/auth/login": "Authenticate user, return session",
      "POST /api/auth/register": "Create new user account",
      "POST /api/auth/logout": "Invalidate session",
      "GET /api/auth/me": "Get current user info",
      "POST /api/auth/refresh": "Refresh expired tokens"
    },
    "snippet_endpoints": {
      "GET /api/snippets": "List snippets with filtering",
      "POST /api/snippets": "Create new snippet",
      "GET /api/snippets/{id}": "Get snippet details",
      "PUT /api/snippets/{id}": "Update snippet",
      "DELETE /api/snippets/{id}": "Soft delete snippet",
      "POST /api/snippets/{id}/fork": "Fork snippet",
      "GET /api/snippets/{id}/versions": "Get version history",
      "POST /api/snippets/{id}/star": "Star/unstar snippet",
      "GET /api/snippets/{id}/analyses": "Get code analyses"
    },
    "collaboration_endpoints": {
      "POST /api/collaboration/sessions": "Create collaboration session",
      "GET /api/collaboration/sessions/{token}": "Join session",
      "POST /api/collaboration/sessions/{token}/updates": "Push updates",
      "GET /api/collaboration/sessions/{token}/updates": "Poll for updates",
      "DELETE /api/collaboration/sessions/{token}": "End session"
    },
    "user_endpoints": {
      "GET /api/users/{id}": "Get user profile",
      "PUT /api/users/{id}": "Update profile",
      "GET /api/users/{id}/snippets": "Get user's snippets",
      "GET /api/users/{id}/achievements": "Get user achievements",
      "GET /api/users/leaderboard": "Get leaderboard"
    },
    "admin_endpoints": {
      "GET /api/admin/users": "List all users",
      "PUT /api/admin/users/{id}/roles": "Update user roles",
      "GET /api/admin/audit-logs": "View audit logs",
      "POST /api/admin/cache/clear": "Clear cache",
      "GET /api/admin/health": "System health check"
    }
  },
  "deployment_configuration": {
    "infinityfree_backend": {
      "requirements": [
        "PHP 8.0+",
        "MySQL 5.7+",
        "HTTPS enabled"
      ],
      "setup_steps": [
        "Upload backend files to InfinityFree hosting",
        "Create MySQL database via phpMyAdmin",
        "Import database schema",
        "Configure .env file with database credentials",
        "Set up cron jobs via cron-job.org for maintenance tasks"
      ],
      "configuration": {
        "max_upload_size": "64M",
        "memory_limit": "256M",
        "max_execution_time": "120",
        "session_lifetime": "7200"
      }
    },
    "cloudflare_frontend": {
      "deployment_options": [
        "Cloudflare Pages (static hosting)",
        "Netlify (free tier)",
        "Vercel (free tier)",
        "GitHub Pages"
      ],
      "setup_steps": [
        "Build frontend with npm run build",
        "Deploy to chosen static hosting",
        "Configure API base URL",
        "Set up custom domain with SSL",
        "Configure redirects for client-side routing"
      ]
    },
    "single_server_deployment": {
      "setup": "Both frontend and backend on same InfinityFree account",
      "configuration": {
        "frontend_path": "/public_html",
        "backend_path": "/public_html/api",
        "shared_database": "Same MySQL instance",
        ".htaccess_rules": "Rewrite API calls to backend, serve frontend for other routes"
      }
    },
    "environment_variables": {
      "frontend": {
        "VITE_API_BASE_URL": "https://api.yourdomain.com",
        "VITE_APP_NAME": "CodeEngage",
        "VITE_APP_VERSION": "1.0.0",
        "VITE_ENABLE_PWA": "true"
      },
      "backend": {
        "APP_ENV": "production",
        "APP_URL": "https://api.yourdomain.com",
        "DB_HOST": "localhost",
        "DB_NAME": "codeengage_db",
        "DB_USER": "codeengage_user",
        "DB_PASSWORD": "secure_password",
        "SESSION_SECRET": "random_32_character_string",
        "CACHE_DRIVER": "file",
        "MAINTENANCE_MODE": "false"
      }
    }
  },
  "security_configuration": {
    "input_validation": {
      "snippet_code": "Max 1MB, UTF-8 encoding, no null bytes",
      "user_input": "Trim, strip tags, length limits per field",
      "file_uploads": "Only allow specific MIME types, scan for malware patterns"
    },
    "output_escaping": {
      "html_context": "htmlspecialchars with ENT_QUOTES",
      "json_context": "json_encode with JSON_HEX_TAG",
      "javascript_context": "Custom escaping for JS templates"
    },
    "content_security_policy": {
      "default_src": "'self'",
      "script_src": "'self' 'unsafe-inline' 'wasm-unsafe-eval'",
      "style_src": "'self' 'unsafe-inline'",
      "connect_src": "'self' api.yourdomain.com",
      "frame_src": "'self' sandbox.yourdomain.com"
    },
    "session_security": {
      "cookie_httponly": true,
      "cookie_secure": true,
      "cookie_samesite": "Lax",
      "session_regenerate": true,
      "session_timeout": 7200
    },
    "rate_limiting": {
      "general": "100 requests/minute per IP",
      "auth": "5 attempts/15 minutes per IP",
      "api": "1000 requests/hour per user"
    }
  },
  "performance_optimization": {
    "frontend": {
      "asset_optimization": [
        "Tailwind CSS purged for production",
        "JavaScript code splitting by route",
        "SVG icons sprite sheet",
        "Fonts subset and woff2 format",
        "Lazy loading for images and below-fold content"
      ],
      "caching_strategy": [
        "Service Worker for offline caching",
        "IndexedDB for snippet data",
        "LocalStorage for user preferences",
        "Cache API for API responses"
      ]
    },
    "backend": {
      "database": [
        "Query optimization with EXPLAIN analysis",
        "Composite indexes for common queries",
        "Query caching via MySQL query cache",
        "Connection pooling with persistent connections"
      ],
      "php": [
        "OPcache enabled with preloading",
        "Realpath cache size increased",
        "Output buffering for compression",
        "Early gzip compression check"
      ],
      "caching_layers": [
        "APCu for user session data",
        "File cache for expensive computations",
        "Cloudflare edge cache for public content",
        "Browser cache headers optimized"
      ]
    }
  },
  "monitoring_and_maintenance": {
    "health_checks": [
      "Database connectivity",
      "Filesystem writability",
      "Cache functionality",
      "API response times",
      "Error rate monitoring"
    ],
    "logging": {
      "error_logs": "Structured JSON to /storage/logs/error.log",
      "access_logs": "Request/response logging",
      "audit_logs": "All security-relevant actions",
      "performance_logs": "Slow queries, high memory usage"
    },
    "backup_strategy": {
      "database": "Daily automated backups via cron-job.org",
      "files": "Weekly backup of uploaded files",
      "retention": "30 days for logs, 7 days for temp files",
      "verification": "Monthly restore test from backups"
    },
    "cleanup_tasks": {
      "daily": [
        "Expired collaboration sessions",
        "Old temporary files",
        "Invalid cache entries"
      ],
      "weekly": [
        "Soft-deleted records older than 30 days",
        "Old audit logs (archive)",
        "Orphaned file cleanup"
      ],
      "monthly": [
        "Update leaderboard calculations",
        "Database optimization",
        "Security review"
      ]
    }
  },
  "development_workflow": {
    "local_development": {
      "requirements": [
        "PHP 8.0+",
        "Node.js 16+",
        "MySQL 8.0",
        "Git"
      ],
      "setup": [
        "Clone repository",
        "Run composer install (backend)",
        "Run npm install (frontend)",
        "Copy .env.example to .env",
        "Run database migrations",
        "Start development servers"
      ],
      "scripts": {
        "dev:frontend": "npm run dev",
        "dev:backend": "php -S localhost:8000 -t backend/public",
        "build": "npm run build",
        "test": "npm test && ./vendor/bin/phpunit"
      }
    },
    "testing": {
      "unit_tests": "PHPUnit for backend, Jest for frontend",
      "integration_tests": "API endpoint testing",
      "e2e_tests": "Cypress for critical user flows",
      "performance_tests": "Lighthouse audits, load testing"
    },
    "deployment_pipeline": {
      "staging": "Automatic deploy on push to develop branch",
      "production": "Manual deploy from main branch",
      "rollback": "Database migration rollback scripts",
      "monitoring": "Error tracking via logs, uptime monitoring"
    }
  }
}